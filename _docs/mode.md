# AI Agent Instructions for Test Plan Generation

## 役割と目的

あなたのタスクはE2Eテスト・マニュアル作成自動化のサポートです。
以下の目的でPlaywright MCPを使用してアプリケーションを探索し、テスト計画ドキュメントを生成します：

1. **アプリケーション構造の理解**: 主要機能を特定し、操作パターンを分析
2. **テスト計画の作成**: 各機能の操作ステップを定義
3. **メディア取得計画**: スクリーンショット・動画撮影タイミングの決定
4. **ドキュメント生成**: 構造化されたテスト計画ドキュメントの作成

## アプリケーション概要

対象アプリケーションはNext.jsベースのダッシュボードアプリケーションです：
- **言語**: 日本語UI
- **主要機能**: ダッシュボード、商品管理、注文管理、ユーザー管理、レポート
- **ページ構造**: `/`, `/products`, `/orders`, `/users`, `/reports`

## 実行ステップ

### Phase 1: アプリケーション探索

1. **初期アクセス**
   ```
   1. ルートページ (/) にアクセス
   2. ダッシュボードの主要要素を特定
   3. ナビゲーション構造を確認
   ```

2. **機能別探索**
   ```
   各ページを順次訪問し、以下の情報を収集：
   - ページタイトルと主要機能
   - 操作可能なUI要素（ボタン、フォーム、リンク）
   - データ表示形式（テーブル、チャート、リスト）
   ```

### Phase 2: 操作パターン分析

各機能について以下の観点を分析：

1. **CRUD操作**: Create, Read, Update, Delete の有無
2. **フォーム操作**: 入力フィールドの種類と必須項目
3. **ナビゲーション**: ページ間の移動パターン
4. **データフロー**: 情報の表示・編集・保存の流れ

### Phase 3: テスト計画ドキュメント作成

各機能ごとに以下の構造でドキュメントを作成：

```markdown
# [機能名]テスト計画

## 概要
[機能の目的と概要]

## 操作ステップ
1. **[ステップ名]**
   - スクリーンショット: `images/[機能名]-[ステップ]-[番号].png`
   - 動画録画: 開始/終了

2. **[次のステップ]**
   ...

## テストデータ
- [項目名]: [サンプル値]
```

## スクリーンショット撮影タイミング

### 必須撮影ポイント
1. **ページ表示時**: 主要UI要素が表示された状態
2. **操作実行前**: ボタンクリックやフォーム入力前
3. **操作実行後**: 結果が反映された状態
4. **フォーム入力時**: 入力内容が確認できる状態

### 推奨撮影ポイント
- エラーメッセージ表示時
- ローディング状態
- モーダル/ダイアログ表示時
- データ更新後の確認

## 動画録画設定

### 録画範囲
- **開始**: 各テストシナリオの最初
- **終了**: テスト完了時
- **対象**: 全操作の流れ

### 品質設定
- **フォーマット**: WebM
- **解像度**: ブラウザ表示サイズに準拠
- **編集**: なし（そのまま録画）

## 出力ファイル構造

```
/_docs/plan/
└── [機能名].md              # テスト計画ドキュメント

```

## 機能特定優先順位

1. **商品管理** (`/products`)
   - 商品一覧表示
   - 商品追加・編集・削除
   - 在庫管理

2. **注文管理** (`/orders`)
   - 注文一覧表示
   - 注文詳細確認
   - ステータス更新

3. **ユーザー管理** (`/users`)
   - ユーザー一覧表示
   - ユーザー情報編集
   - 権限管理

4. **レポート** (`/reports`)
   - 各種レポート表示
   - データ集計確認

## エラーハンドリング

### 予期せぬエラー発生時
1. エラーの詳細を記録
2. スクリーンショットを撮影
3. 可能な限り継続して探索
4. エラーポイントをテスト計画に明記

### ネットワークエラー時
1. リトライ実行（最大3回）
2. タイムアウト設定（30秒）
3. エラー状態を記録

## 品質チェック基準

### テスト計画の品質基準
- [ ] 各ステップが明確に記述されている
- [ ] スクリーンショット撮影タイミングが適切
- [ ] テストデータが現実的
- [ ] エッジケースが考慮されている
- [ ] 操作の依存関係が明確

### ドキュメント品質基準
- [ ] マークダウン形式が正しい
- [ ] 画像パスが正しく設定されている
- [ ] 説明文が具体的でわかりやすい
- [ ] 日本語で記述されている

## 完了条件

テスト計画ドキュメントが作成され、以下の条件を満たすこと：
- 各主要機能の操作ステップが定義されている
- スクリーンショット・動画撮影計画が記載されている
- テストデータが準備されている
- ドキュメントが所定の場所に保存されている

## 以降のステップ

以降は`e2e-manual-automation-strategy.md`を参照して実行して下さい。
